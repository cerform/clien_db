# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –£–ª—É—á—à–µ–Ω–Ω–∞—è INKA

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–£–ª—É—á—à–µ–Ω–∞ INKA** - —Ç–µ–ø–µ—Ä—å –±–æ—Ç –æ–±—â–∞–µ—Ç—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏
2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Assistant API** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç `asst_LBGeLxauJ3nYbauR3pilbifN`
3. **–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤** - –±–æ—Ç –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è
5. **–ë–æ—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω –≤ Cloud Run** - –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ

## ‚öôÔ∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –î–æ–±–∞–≤–∏—Ç—å OpenAI API –∫–ª—é—á

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç**
```bash
./setup_openai_cloud.sh
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é**
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ä–µ—Ç
echo 'sk-–≤–∞—à-–∫–ª—é—á' | gcloud secrets create openai-api-key \
  --data-file=- \
  --project=tattoo-480007

# –î–∞—Ç—å –¥–æ—Å—Ç—É–ø Cloud Run
gcloud secrets add-iam-policy-binding openai-api-key \
  --member='serviceAccount:408800151466-compute@developer.gserviceaccount.com' \
  --role='roles/secretmanager.secretAccessor' \
  --project=tattoo-480007

# –û–±–Ω–æ–≤–∏—Ç—å –¥–µ–ø–ª–æ–π
gcloud run deploy telegram-bot \
  --source . \
  --platform managed \
  --region us-central1 \
  --project tattoo-480007 \
  --set-secrets=TELEGRAM_BOT_TOKEN=telegram-bot-token:latest,GOOGLE_SHEETS_ID=google-sheets-id:latest,GOOGLE_CREDENTIALS=google-credentials:latest,OPENAI_API_KEY=openai-api-key:latest \
  --set-env-vars=OPENAI_ASSISTANT_ID=asst_LBGeLxauJ3nYbauR3pilbifN \
  --memory 512Mi \
  --min-instances 1 \
  --max-instances 1
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è API –∫–ª—é—á–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ**: "–ü—Ä–∏–≤–µ—Ç!"
2. **–í–æ–ø—Ä–æ—Å**: "–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –º–∞–ª–µ–Ω—å–∫–∞—è —Ç–∞—Ç—É?"
3. **–û–±—Å—É–∂–¥–µ–Ω–∏–µ**: "–•–æ—á—É —á—Ç–æ-—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ"
4. **–ó–∞–ø–∏—Å—å**: "–ó–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω—è –Ω–∞ –ø—Ä–∏–µ–º"

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
gcloud logging read \
  "resource.type=cloud_run_revision AND resource.labels.service_name=telegram-bot" \
  --limit=50 \
  --project=tattoo-480007 \
  --format="table(timestamp,severity,textPayload)"
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `INKA_IMPROVEMENTS.md`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ**: `setup_openai.py`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloud**: `setup_openai_cloud.sh`

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ß–µ–ª–æ–≤–µ—á–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–∫—Ä–∞—Å–∫–∞
- –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –≠–º–ø–∞—Ç–∏—è –∏ –∑–∞–±–æ—Ç–∞

### –£–º–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ì–∏–±–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

### Assistant API
- –ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

## ‚ö° –°—Ç–∞—Ç—É—Å

- ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ë–æ—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω –≤ Cloud Run
- ‚è≥ –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å OPENAI_API_KEY
- ‚úÖ Assistant ID –Ω–∞—Å—Ç—Ä–æ–µ–Ω

## üÜò –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã: `gcloud secrets list --project=tattoo-480007`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ (–∫–æ–º–∞–Ω–¥–∞ –≤—ã—à–µ)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á –≤–∞–ª–∏–¥–Ω—ã–π
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Assistant ID –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./setup_openai_cloud.sh` —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á! üöÄ
