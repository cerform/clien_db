# üìã Admin Chat - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## ‚úÖ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã

### 1. **–°–µ—Ä–≤–∏—Å ChatGPT**
üìÑ `/src/services/admin_chat_service.py` (150+ —Å—Ç—Ä–æ–∫)
- –ö–ª–∞—Å—Å `AdminChatService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAI
- –í–µ–¥–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è (8 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 2. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π**
üìÑ `/src/db/repositories/admin_messages_repo.py` (130+ —Å—Ç—Ä–æ–∫)
- –ö–ª–∞—Å—Å `AdminMessagesRepo` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Sheets
- –ú–µ—Ç–æ–¥—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

### 3. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —á–∞—Ç–∞ –≤ Telegram**
üìÑ `/src/bot/handlers/admin_chat_handler.py` (200+ —Å—Ç—Ä–æ–∫)
‚ö†Ô∏è **–ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù –í** `/src/bot/handlers/admin_handlers.py`
- –§—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–¥–º–∏–Ω-—á–∞—Ç–∞
- FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥

### 4. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã**
üìÑ `/init_admin_messages.py` (40+ —Å—Ç—Ä–æ–∫)
- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `admin_messages` –≤ Google Sheets
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –∫–æ–ª–æ–Ω–æ–∫

### 5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
üìÑ `/ADMIN_CHAT_GUIDE.md` (300+ —Å—Ç—Ä–æ–∫)
- –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

üìÑ `/ADMIN_CHAT_QUICK_START.md` (50+ —Å—Ç—Ä–æ–∫)
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 3 —à–∞–≥–∞

üìÑ `/ADMIN_CHAT_START.md` (50+ —Å—Ç—Ä–æ–∫)
- –£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç

üìÑ `/ADMIN_CHAT_IMPLEMENTATION.md` (300+ —Å—Ç—Ä–æ–∫)
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤

---

## üîÑ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **–ê–¥–º–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**
üìÑ `/src/bot/handlers/admin_handlers.py`
- ‚ûï –ò–º–ø–æ—Ä—Ç: `AdminChatService`, `AdminMessagesRepo`
- ‚ûï FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ: `AdminChatStates`
- ‚ûï –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω-—á–∞—Ç–∞
- ‚ûï –§—É–Ω–∫—Ü–∏–∏: `cmd_admin_chat()`, `process_admin_message()`, `cmd_chat_stats()`

### 2. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞**
üìÑ `/src/bot/keyboards/common_kb.py`
- ‚ûï –î–≤–µ –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –≤ `admin_menu()`:
  - üí¨ Admin Chat
  - üìä Chat Stats

### 3. **.env**
üìÑ `/.env`
- ‚úÖ `OPENAI_API_KEY` - —É–∂–µ –µ—Å—Ç—å (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω)
- ‚úÖ `DEFAULT_SLOT_DURATION` - —É–∂–µ –µ—Å—Ç—å
- ‚úÖ `MASTER_CALENDAR_ID` - —É–∂–µ –µ—Å—Ç—å

### 4. **requirements.txt**
üìÑ `/requirements.txt`
- ‚úÖ `openai==1.6.0` - —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞

---

## üìä Google Sheets —Ç–∞–±–ª–∏—Ü–∞

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: `admin_messages`

–ö–æ–ª–æ–Ω–∫–∏:
1. **id** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
2. **admin_user_id** - ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Telegram
3. **user_message** - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
4. **ai_response** - –æ—Ç–≤–µ—Ç ChatGPT
5. **categories** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
6. **has_contact_info** - "Yes" –∏–ª–∏ "No" –¥–ª—è –Ω–∞–ª–∏—á–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
7. **has_date** - "Yes" –∏–ª–∏ "No" –¥–ª—è –Ω–∞–ª–∏—á–∏—è –¥–∞—Ç
8. **has_price** - "Yes" –∏–ª–∏ "No" –¥–ª—è –Ω–∞–ª–∏—á–∏—è —Ü–µ–Ω
9. **timestamp** - –≤—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è (ISO format)

---

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ö–æ–º–∞–Ω–¥—ã –≤ Telegram

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/admin` | –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–º–µ–Ω—é |
| `/adminchat` | –ù–∞—á–∞—Ç—å —á–∞—Ç (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ) |
| `/chatstats` | –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É |
| `/chathistory` | –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é |

### –ö–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é

| –ö–Ω–æ–ø–∫–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|--------|----------|
| üí¨ Admin Chat | –í–æ–π—Ç–∏ –≤ —Ä–µ–∂–∏–º —á–∞—Ç–∞ —Å AI |
| üìä Chat Stats | –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π |

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

1. **üë• Client Information** - –¥–∞–Ω–Ω—ã–µ –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö
2. **üë®‚Äçüé® Master Information** - –¥–∞–Ω–Ω—ã–µ –æ –º–∞—Å—Ç–µ—Ä–∞—Ö
3. **üìÖ Appointment Details** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø–∏—Å—è—Ö
4. **üí∞ Financial Information** - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
5. **üìã Studio Operations** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ç—É–¥–∏–∏
6. **üìä Marketing & Feedback** - –º–∞—Ä–∫–µ—Ç–∏–Ω–≥
7. **‚ö†Ô∏è Technical Issues** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
8. **üìù Other Notes** - –ø—Ä–æ—á–∏–µ –∑–∞–º–µ—Ç–∫–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£–±–µ–¥–∏—Ç—å—Å—è –≤ OPENAI_API_KEY –≤ .env
grep OPENAI_API_KEY .env

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç
python3 run.py

# 3. –í Telegram –æ—Ç–ø—Ä–∞–≤–∏—Ç—å /admin
# 4. –í—ã–±—Ä–∞—Ç—å "üí¨ Admin Chat"
# 5. –ü–∏—Å–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ | 4 |
| –ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π | 3 –æ—Å–Ω–æ–≤–Ω—ã–µ + 2 –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ |
| –ò–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ | 2 |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | 500+ |
| –°—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | 1000+ |
| –Ø–∑—ã–∫–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö | –í—Å–µ (—Ä—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –∏–≤—Ä–∏—Ç –∏ —Ç.–¥.) |
| –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ | ~1 —á–∞—Å |

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

- [ ] –¢–∞–±–ª–∏—Ü–∞ `admin_messages` –≤–∏–¥–Ω–∞ –≤ Google Sheets
- [ ] OPENAI_API_KEY –Ω–µ –ø—É—Å—Ç–æ–π –≤ .env
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: `python3 run.py`
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/admin` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–Ω–æ–ø–∫–∞ "üí¨ Admin Chat" –≤–∏–¥–Ω–∞ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç—Å—è
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —á–∞—Ç
- [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å –≤ Google Sheets —Ç–∞–±–ª–∏—Ü–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "üìä Chat Stats" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üîó –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `ADMIN_CHAT_GUIDE.md`
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: `ADMIN_CHAT_IMPLEMENTATION.md`
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `ADMIN_CHAT_QUICK_START.md`
- –£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `ADMIN_CHAT_START.md`

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ! Admin Chat —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**
